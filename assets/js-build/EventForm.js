var EventForm={signUpId:null,eventId:null,eventSignUp:null,signUpToggler:null,signUpRemoveButton:null,init:function(){this.signUpToggler=$("#event_sign_up_toggle"),this.signUpRemoveButton=$("#event_sign_up_remove"),this.setUpDateFields(),$(".buttonset").buttonset(),$("button").button(),this.setUpSignUpForm(),this.setUpSignUpRemove()},setUpDateFields:function(){$.mask.definitions["~"]="[ap]",$.mask.definitions.H="[ 01]",$.mask.definitions.M="[012345]",$(".time").mask("H9:M9 ~m"),$.mask.definitions.D="[ 01]",$.mask.definitions.M="[ 0123]",$(".date").mask("D9/M9/2019"),$(".date").datepicker();var a=$("#start_date"),b=$("#end_date");a.change(function(){var c=a.datepicker("getDate"),d=b.datepicker("getDate");c>d&&(d=new Date(c),b.datepicker("setDate",d))})},setUpSignUpForm:function(){var a=this;$("#event_sign_up_specific").hide(),$("#sign_up_enabled").change(function(b){var c=$(b.target).val();c==="1"?(a.eventSignUp=new EventSignUp.Form("event_sign_up_form"),$("#sign_up_capacity").val("").focus(),$("#event_sign_up_specific").show()):($("#event_sign_up_specific").hide(),$("#sign_up_capacity").val(""),$("#event_sign_up_form").empty())}),$("#event_create_fields").submit(function(){var b=$(this).serialize();a.eventSignUp!==null&&(b+="&"+$.param({sign_up_questions:a.eventSignUp.serialize()})),$.post("",b,function(b){window.location=SITE_URL+"/event/view/"+a.eventId});return!1})},setSignUpId:function(a){this.signUpId=a},setEventId:function(a){this.eventId=a},setUpSignUpRemove:function(){var a=this;this.signUpRemoveButton.click(function(){$("<div/>").html('<p>\n        <span class="ui-icon ui-icon-alert" \n        style="float:left; margin:0 7px 20px 0;"></span>\n        The sign up and all results will be\n        permanently deleted and cannot be recovered.\n        Are you sure?\n        </p>\n        ').dialog({title:"Delete Sign Up",resizable:!1,modal:!0,width:350,draggable:!1,buttons:{Cancel:function(){$(this).dialog("close")},"Delete Sign Up":function(){var b=$(this);$.post(SITE_URL+"/sign_up/delete",{id:a.signUpId},function(c){c==="1"&&($("#event_sign_up_remove_container").remove(),this.signUpRemoveButton=null,a.signUpToggler.show(),b.dialog("close"))})}}})})}}