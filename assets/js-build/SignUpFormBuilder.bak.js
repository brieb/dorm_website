var SignUpFormBuilder={};SignUpFormBuilder={init:function(a){SignUpFormBuilder.dialog.container=a,SignUpFormBuilder.dialog.setUp(),SignUpFormBuilder.buttons.setUp(),SignUpFormBuilder.form.container=$("#sign_up_form_create")},form:{container:null,submitHandler:function(){var a=[];SignUpFormBuilder.form.container.find("fieldset").each(function(b,c){c=$(c);var d={};d.id=c.find('input[name="question[id]"]').val(),d.type=c.find('input[name="question[type]"]').val(),d.text=c.find('input[name="question[text]"]').val(),d.help=c.find('input[name="question[help]"]').val(),d.required=c.find('input[name="question[required]"]').val();var e=c.find('input[name="question[choice][]"]');d.choices=[],e.each(function(a,b){b=$(b),d.choices.push(b.val())}),a.push(d)});return a}},dialog:{container:null,containerButtons:null,setUp:function(){SignUpFormBuilder.dialog.container.append($("<form />").attr({id:"sign_up_form_create"}).addClass("ui-form")),SignUpFormBuilder.dialog.containerButtons=$("<div />").attr({"class":"sign_up_form_builder_buttons_container"})}},buttons:{types:["text","paragraph_text","multiple_choice","checkboxes","choose_from_a_list"],setUp:function(){SignUpFormBuilder.buttons.types.map(function(a){$("<button />").attr({name:"sign_up_form_create["+a+"]"}).text(SignUpFormBuilder.buttons.convertToPrettyText(a)).button().click(function(){var b=SignUpFormBuilder.field.genType(a);SignUpFormBuilder.form.container.append(b)}).appendTo(SignUpFormBuilder.dialog.containerButtons),$("<br />").appendTo(SignUpFormBuilder.dialog.containerButtons)}),SignUpFormBuilder.dialog.container.append(SignUpFormBuilder.dialog.containerButtons)},convertToPrettyText:function(a){return a.replace(/(^|_)\w/g,function(a){return a.toUpperCase()}).replace(/_/g," ")}},field:{curId:0,genType:function(a){SignUpFormBuilder.field.curId++;var b=a.replace(/((^|\_)[a-z])/g,function(a){return a.toUpperCase().replace("_","")}),c=$("<fieldset />");c.append($("<legend />").text(SignUpFormBuilder.buttons.convertToPrettyText(a)),$("<input />").attr({type:"hidden",name:"question[id]",value:SignUpFormBuilder.field.curId}),$("<input />").attr({type:"hidden",name:"question[type]",value:a}),$("<div />").attr({"class":"label"}).text("Question Text:"),$("<input />").attr({type:"text",name:"question[text]",placeholder:"Enter question text here..."}),$("<br />"),$("<div />").attr({"class":"label"}).text("Question Help:"),$("<input />").attr({type:"text",name:"question[help]",placeholder:"Optional question help"}),$("<div />").attr({"class":"field"}).append(SignUpFormBuilder.field["genType"+b]()),$("<button />").attr({"class":"button_remove"}).button({icons:{primary:"ui-icon-trash"},text:!1}).click(function(a){var b=$(a.target);b.parents("fieldset").remove()}));return c},genTypeText:function(){return null},genTypeParagraphText:function(){return null},genTypeMultipleChoice:function(){var a=SignUpFormBuilder.field.genDummyField("radio","Click here to add another choice",SignUpFormBuilder.field.genMultipleChoiceChoice);return SignUpFormBuilder.field.genMultipleChoiceChoice().after(a)},genMultipleChoiceChoice:function(){var a=$("<input />").attr({type:"radio",disabled:"disabled"}).after($("<input />").attr({type:"text",name:"question[choice][]",placeholder:"Enter Choice Text Here"})).after($("<br />"));return a},genTypeCheckboxes:function(){var a=SignUpFormBuilder.field.genDummyField("checkbox","Click here to add another checkbox",SignUpFormBuilder.field.genCheckbox);return SignUpFormBuilder.field.genCheckbox().after(a)},genCheckbox:function(){var a=$("<input />").attr({type:"checkbox",disabled:"disabled"}).after($("<input />").attr({type:"text",name:"question[choice][]",placeholder:"Enter Choice Text Here"})).after($("<br />"));return a},genTypeChooseFromAList:function(){var a=SignUpFormBuilder.field.genDummyField("none","Click here to add another choice",SignUpFormBuilder.field.genChooseFromAListChoice);return SignUpFormBuilder.field.genChooseFromAListChoice().after(a)},genChooseFromAListChoice:function(){var a=$("<input />").attr({type:"text",name:"question[choice][]",placeholder:"Enter choice text here"}).after($("<br />"));return a},newChoiceClickHandler:function(a,b){var c=$(a.target),d=b();c.parent().before(d);for(var e=0;e<d.length;e++){console.log(d[e]);if($(d[e]).attr("type")==="text"){d[e].focus();break}}},genDummyField:function(a,b,c){var d=$("<span />").css({position:"relative"});a!=="none"&&d.append($("<input />").attr({type:a,disabled:"disabled"})),d.append($("<input />").attr({type:"text",disabled:"disabled",value:b}),$("<span />").css({"z-index":"100",width:"100%",height:"100%",position:"absolute",top:0,left:0}).click(function(a){SignUpFormBuilder.field.newChoiceClickHandler(a,c)}));return d}}}