var EventEdit={};EventEdit={data:null,signUpDelete:0,url:SITE_URL+"/event/edit/",urlView:SITE_URL+"/event/view",urlDelete:SITE_URL+"/event/delete/",container:null,sidebar:null,init:function(b,c,a){this.container=$("#"+c);this.sidebar=$("#"+b);this.data=a;this.url+=this.data.id;this.urlDelete+=this.data.id;EventCreate.init(b,c);this.setUpDelete();EventCreate.submitButton.button("option","label","Finish Editing Event");EventCreate.submitButton.unbind("click").click(function(){var d=EventCreate.serialize();d+="&sign_up_delete="+this.signUpDelete;d+="&sign_up_id="+this.data.sign_up_id;d+="&id="+this.data.id;$.post(this.url,d,function(e){window.location=this.urlView+"/"+this.data.id}.bind(this));return false}.bind(this));this.replay()},setUpDelete:function(){this.sidebar.append($("<div />").attr({"class":"sidebar-box"}).append($("<button/>").button({label:"Delete Event"}).click(function(){$("<div/>").dialog({title:"Delete Event",modal:true,buttons:{"Delete Event":function(){$.post(EventEdit.urlDelete,function(a){window.location=EventEdit.urlView;$(this).dialog("close")}.bind(this))},Cancel:function(){$(this).dialog("close")}}}).html($("<p/>").text("Deleting this event will delete the                       event information and associated sign ups.                       This cannot be undone."))})))},getObjValueByIdentifierArray:function(d,a){var c=a.match(/\w*[^\[\]]/g);for(var b=0;b<c.length;b++){d=d[c[b]]}return d},setFieldValue:function(a,b){var c=$('       input[name="'+a+'"],      textarea[name="'+a+'"]     ');if(a.substring(0,"time".length)==="time"){c.datetimepicker("setDate",(new Date(b)))}else{c.val(b)}},replay:function(){$.each(EventCreate.fieldTypes,function(a,b){b.fields.map(function(d){var c=undefined;if(b.isDefault){c=this.getObjValueByIdentifierArray(this.data,d.identifier)}else{if(this.data.fields[b.name]!==undefined){$('button[name="button_field_add['+b.name+']"]').click();var e=d.identifier.replace(new RegExp("form_builder\\["+b.name+"\\]\\[(.*)\\]"),"$1");c=this.data.fields[b.name][e]}}if(c!==undefined){this.setFieldValue(d.identifier,c)}},this)}.bind(this));if(this.data.sign_up_id!==null){$('button[name="button_field_add[SignUp]"]').unbind("click").click(function(a){var b=$(a.target);b.button("disable");this.signUpEdit()}.bind(this)).click()}},signUpEdit:function(){EventCreate.containerSignUp.addClass("sidebar-box").append($("<button/>").text("Remove Sign Up").button().click(function(a){var b=$(a.target);$("<div/>").html('                <p>                  <span class="ui-icon ui-icon-alert"                     style="float:left; margin:0 7px 20px 0;"></span>                  The sign up and all results will be                  permanently deleted and cannot be recovered.                  Are you sure?                </p>              ').dialog({title:"Delete Sign Up",resizable:false,modal:true,width:350,draggable:false,buttons:{Cancel:function(){$(this).dialog("close")},"Delete Sign Up":function(){EventEdit.signUpDelete=1;EventCreate.containerSignUp.remove();EventCreate.signUpClear();$('button[name="button_field_add[SignUp]"]').blur().mouseleave().button("enable").unbind("click").click(function(c){var d=$(c.target);d.button("disable");EventCreate.signUpCreate()});$(this).dialog("close")}}})}.bind(this)))},};